!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((r["crosslink-plotly"]=r["crosslink-plotly"]||{},r["crosslink-plotly"].js={}))}(this,function(r){"use strict";function n(r){return null!=r&&"object"==typeof r&&!0===r["@@functional/placeholder"]}function t(r){return function t(e){return 0===arguments.length||n(e)?t:r.apply(this,arguments)}}function e(r){return function e(o,u){switch(arguments.length){case 0:return e;case 1:return n(o)?e:t(function(n){return r(o,n)});default:return n(o)&&n(u)?e:n(o)?t(function(n){return r(n,u)}):n(u)?t(function(n){return r(o,n)}):r(o,u)}}}function o(r,n){switch(r){case 0:return function(){return n.apply(this,arguments)};case 1:return function(r){return n.apply(this,arguments)};case 2:return function(r,t){return n.apply(this,arguments)};case 3:return function(r,t,e){return n.apply(this,arguments)};case 4:return function(r,t,e,o){return n.apply(this,arguments)};case 5:return function(r,t,e,o,u){return n.apply(this,arguments)};case 6:return function(r,t,e,o,u,i){return n.apply(this,arguments)};case 7:return function(r,t,e,o,u,i,a){return n.apply(this,arguments)};case 8:return function(r,t,e,o,u,i,a,c){return n.apply(this,arguments)};case 9:return function(r,t,e,o,u,i,a,c,f){return n.apply(this,arguments)};case 10:return function(r,t,e,o,u,i,a,c,f,l){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function u(r,t,e){return function(){for(var i=arguments,a=[],c=0,f=r,l=0;l<t.length||c<arguments.length;){var s;l<t.length&&(!n(t[l])||c>=i.length)?s=t[l]:(s=i[c],c+=1),a[l]=s,n(s)||(f-=1),l+=1}return f<=0?e.apply(this,a):o(f,u(r,a,e))}}function i(r,n,t){return function(){if(0===arguments.length)return t();var e=Array.prototype.slice.call(arguments,0),o=e.pop();if(!w(o)){for(var u=0;u<r.length;){if("function"==typeof o[r[u]])return o[r[u]].apply(o,e);u+=1}if(function(r){return"function"==typeof r["@@transducer/step"]}(o)){return n.apply(null,e)(o)}}return t.apply(this,arguments)}}function a(r,n){for(var t=0,e=n.length,o=Array(e);t<e;)o[t]=r(n[t]),t+=1;return o}function c(r){return"[object String]"===Object.prototype.toString.call(r)}function f(r){return new k(r)}function l(r,n,t){for(var e=t.next();!e.done;){if((n=r["@@transducer/step"](n,e.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}e=t.next()}return r["@@transducer/result"](n)}function s(r,n,t,e){return r["@@transducer/result"](t[e](E(r["@@transducer/step"],r),n))}function p(r,n,t){if("function"==typeof r&&(r=f(r)),_(t))return function(r,n,t){for(var e=0,o=t.length;e<o;){if((n=r["@@transducer/step"](n,t[e]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}e+=1}return r["@@transducer/result"](n)}(r,n,t);if("function"==typeof t["fantasy-land/reduce"])return s(r,n,t,"fantasy-land/reduce");if(null!=t[j])return l(r,n,t[j]());if("function"==typeof t.next)return l(r,n,t);if("function"==typeof t.reduce)return s(r,n,t,"reduce");throw new TypeError("reduce: list must be array or iterable")}function d(r,n){return Object.prototype.hasOwnProperty.call(n,r)}function h(r,n,t,e){var o=function(o){for(var u=n.length,i=0;i<u;){if(r===n[i])return t[i];i+=1}n[i+1]=r,t[i+1]=o;for(var a in r)o[a]=e?h(r[a],n,t,!0):r[a];return o};switch(z(r)){case"Object":return o({});case"Array":return o([]);case"Date":return new Date(r.valueOf());case"RegExp":return function(r){return new RegExp(r.source,(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.sticky?"y":"")+(r.unicode?"u":""))}(r);default:return r}}function y(r){return"[object Number]"===Object.prototype.toString.call(r)}function v(r,n){return void 0===r&&(r="array"),{_path:n||("array"===r?[]:""),set:function(n,t){var e;switch(r){case"array":e=this._path.concat([t]);break;case"nestedProperty":e=0===this._path.length?t:Array.isArray(n)?this._path+"["+t+"]":this._path+"."+t;break;default:throw new Error("unrecognized pathType "+r)}return v(r,e)},get:function(n,t){return"array"===r?this._path:this.set(n,t)._path}}}function g(r){var n="",t=0;"_fullData"===r[t]&&(t+=2),"_fullInput"===r[t]&&t++,"_fullLayout"===r[t]&&t++;for(var e=t;e<r.length;e++)"number"==typeof r[e]||Array.isArray(r[e])?n+="["+(Array.isArray(r[e])?r[e][0]:r[e])+"]":n+=(e>t?".":"")+r[e];return n}function m(r,n,t,e){var o=e.walkArrays,u=e.walkArraysMatchingKeys;Object.keys(r).forEach(function(i){if(!n(i,r,t.get(r,i))){var a=r[i];($(a)||function(r,n,t,e){return!!Array.isArray(n)&&!!(t||e&&e.includes(r))}(i,a,o,u))&&m(a,n,t.set(r,i),e)}})}function b(r,n,t){if(void 0===t&&(t={}),!$(r)&&!Array.isArray(r))throw new Error("The input must be an object.");m(r,n,v(t.pathType),t)}function D(r,n,t,e){var o=e?"none":n._cfData.originalFullData[t].hoverinfo;o&&n._fullData[t].hoverinfo!==o&&-1===["scattermapbox","scattergeo","scatter3d"].indexOf(n._fullData[0].type)&&r.restyle(n,"hoverinfo",o,[t])}var A=e(function(r,n){return 1===r?t(n):o(r,u(r,[],n))}),w=Array.isArray||function(r){return null!=r&&r.length>=0&&"[object Array]"===Object.prototype.toString.call(r)},O=function(){return this.xf["@@transducer/init"]()},x=function(r){return this.xf["@@transducer/result"](r)},_=t(function(r){return!!w(r)||!!r&&("object"==typeof r&&(!c(r)&&(1===r.nodeType?!!r.length:0===r.length||r.length>0&&(r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1)))))}),k=function(){function r(r){this.f=r}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(r){return r},r.prototype["@@transducer/step"]=function(r,n){return this.f(r,n)},r}(),E=e(function(r,n){return o(r.length,function(){return r.apply(n,arguments)})}),j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",S=function(){function r(r,n){this.xf=n,this.f=r}return r.prototype["@@transducer/init"]=O,r.prototype["@@transducer/result"]=x,r.prototype["@@transducer/step"]=function(r,n){return this.xf["@@transducer/step"](r,this.f(n))},r}(),N=e(function(r,n){return new S(r,n)}),C=Object.prototype.toString,I=!{toString:null}.propertyIsEnumerable("toString"),P=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=function(){return arguments.propertyIsEnumerable("length")}(),T=function(r,n){for(var t=0;t<r.length;){if(r[t]===n)return!0;t+=1}return!1},M=t("function"!=typeof Object.keys||F?function(r){if(Object(r)!==r)return[];var n,t,e=[],o=F&&function(){return"[object Arguments]"===C.call(arguments)?function(r){return"[object Arguments]"===C.call(r)}:function(r){return d("callee",r)}}(r);for(n in r)!d(n,r)||o&&"length"===n||(e[e.length]=n);if(I)for(t=P.length-1;t>=0;)d(n=P[t],r)&&!T(e,n)&&(e[e.length]=n),t-=1;return e}:function(r){return Object(r)!==r?[]:Object.keys(r)}),U=e(i(["fantasy-land/map","map"],N,function(r,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return A(n.length,function(){return r.call(this,n.apply(this,arguments))});case"[object Object]":return p(function(t,e){return t[e]=r(n[e]),t},{},M(n));default:return a(r,n)}})),q=t(function(r){for(var n=M(r),t=n.length,e=[],o=0;o<t;)e[o]=r[n[o]],o+=1;return e}),z=t(function(r){return null===r?"Null":void 0===r?"Undefined":Object.prototype.toString.call(r).slice(8,-1)}),K=t(function(r){return null!=r&&"function"==typeof r.clone?r.clone():h(r,[],[],!0)}),L=function(r){return(r<10?"0":"")+r},R=(Date.prototype.toISOString,e(function(r,n){if(!y(r)||!y(n))throw new TypeError("Both arguments to range must be numbers");for(var t=[],e=r;e<n;)t.push(e),e+=1;return t})),B=t(function(r){var n=[];for(var t in r)d(t,r)&&(n[n.length]=[t,r[t]]);return n}),W="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",X=(String.prototype.trim,Object.prototype.toString),$=function(r){var n;return"[object Object]"===X.call(r)&&(null===(n=Object.getPrototypeOf(r))||n===Object.getPrototypeOf({}))},G="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},H=function(r,n){return n={exports:{}},r(n,n.exports),n.exports}(function(r,n){!function(r){function n(r){return r}function t(r,n){for(var t=0,e=n.length,o=new Array(e);t<e;++t)o[t]=r[n[t]];return o}function e(r){function n(n,t,e,o){for(;e<o;){var u=e+o>>>1;t<r(n[u])?o=u:e=u+1}return e}return n.right=n,n.left=function(n,t,e,o){for(;e<o;){var u=e+o>>>1;r(n[u])<t?e=u+1:o=u}return e},n}function o(r){function n(r,n,e){for(var o=e-n,u=1+(o>>>1);--u>0;)t(r,u,o,n);return r}function t(n,t,e,o){for(var u,i=n[--o+t],a=r(i);(u=t<<1)<=e&&(u<e&&r(n[o+u])>r(n[o+u+1])&&u++,!(a<=r(n[o+u])));)n[o+t]=n[o+u],t=u;n[o+t]=i}return n.sort=function(r,n,e){for(var o,u=e-n;--u>0;)o=r[n],r[n]=r[n+u],r[n+u]=o,t(r,1,u,n);return r},n}function u(r){var n=o(r);return function(t,e,o,u){var i,a,c,f=new Array(u=Math.min(o-e,u));for(a=0;a<u;++a)f[a]=t[e++];if(n(f,0,u),e<o){i=r(f[0]);do{r(c=t[e])>i&&(f[0]=c,i=r(n(f,0,u)[0]))}while(++e<o)}return f}}function i(r){return function(n,t,e){for(var o=t+1;o<e;++o){for(var u=o,i=n[o],a=r(i);u>t&&r(n[u-1])>a;--u)n[u]=n[u-1];n[u]=i}return n}}function a(r){function n(e,o,u){return(u-o<D?t:function(t,e,o){var u,i=(o-e)/6|0,a=e+i,c=o-1-i,f=e+o-1>>1,l=f-i,s=f+i,p=t[a],d=r(p),h=t[l],y=r(h),v=t[f],g=r(v),m=t[s],b=r(m),D=t[c],A=r(D);d>y&&(u=p,p=h,h=u,u=d,d=y,y=u);b>A&&(u=m,m=D,D=u,u=b,b=A,A=u);d>g&&(u=p,p=v,v=u,u=d,d=g,g=u);y>g&&(u=h,h=v,v=u,u=y,y=g,g=u);d>b&&(u=p,p=m,m=u,u=d,d=b,b=u);g>b&&(u=v,v=m,m=u,u=g,g=b,b=u);y>A&&(u=h,h=D,D=u,u=y,y=A,A=u);y>g&&(u=h,h=v,v=u,u=y,y=g,g=u);b>A&&(u=m,m=D,D=u,u=b,b=A,A=u);var w=h,O=y,x=m,_=b;t[a]=p,t[l]=t[e],t[f]=v,t[s]=t[o-1],t[c]=D;var k=e+1,E=o-2,j=O<=_&&O>=_;if(j)for(N=k;N<=E;++N){C=t[N];if((I=r(C))<O)N!==k&&(t[N]=t[k],t[k]=C),++k;else if(I>O)for(;;){if(!((P=r(t[E]))>O)){if(P<O){t[N]=t[k],t[k++]=t[E],t[E--]=C;break}t[N]=t[E],t[E--]=C;break}E--}}else for(N=k;N<=E;N++){C=t[N];if((I=r(C))<O)N!==k&&(t[N]=t[k],t[k]=C),++k;else if(I>_)for(;;){if(!((P=r(t[E]))>_)){P<O?(t[N]=t[k],t[k++]=t[E],t[E--]=C):(t[N]=t[E],t[E--]=C);break}if(--E<N)break}}if(t[e]=t[k-1],t[k-1]=w,t[o-1]=t[E+1],t[E+1]=x,n(t,e,k-1),n(t,E+2,o),j)return t;if(k<a&&E>c){for(var S;(S=r(t[k]))<=O&&S>=O;)++k;for(;(P=r(t[E]))<=_&&P>=_;)--E;for(var N=k;N<=E;N++){var C=t[N],I=r(C);if(I<=O&&I>=O)N!==k&&(t[N]=t[k],t[k]=C),k++;else if(I<=_&&I>=_)for(;;){var P;if(!((P=r(t[E]))<=_&&P>=_)){P<O?(t[N]=t[k],t[k++]=t[E],t[E--]=C):(t[N]=t[E],t[E--]=C);break}if(--E<N)break}}}return n(t,k,E+1)})(e,o,u)}var t=i(r);return n}function c(r){for(var n=new Array(r),t=-1;++t<r;)n[t]=0;return n}function f(r){return[0,r.length]}function l(){return null}function s(){return 0}function p(r){return r+1}function d(r){return r-1}function h(r){return function(n,t){return n+ +r(t)}}function y(r){return function(n,t){return n-r(t)}}function v(){function r(r){var n=c,t=r.length;return t&&(i=i.concat(r),w=x(w,c+=t),k.forEach(function(e){e(r,n,t)})),e}var e={add:r,remove:function(){for(var r=g(c,c),n=[],t=0,e=0;t<c;++t)w[t]?r[t]=e++:n.push(t);O.forEach(function(r){r(0,[],n)}),E.forEach(function(n){n(r)});for(var o,t=0,e=0;t<c;++t)(o=w[t])&&(t!==e&&(w[e]=o,i[e]=i[t]),++e);for(i.length=e;c>e;)w[--c]=0},dimension:function(r){function e(n,e,o){z=n.map(r),K=X(function(r){for(var n=g(r,r),t=-1;++t<r;)n[t]=t;return n}(o),0,o),z=t(z,K);var u,i=$(z),a=i[0],f=i[1];if(L)for(u=0;u<o;++u)L(z[u],u)||(w[K[u]+e]|=B);else{for(u=0;u<a;++u)w[K[u]+e]|=B;for(u=f;u<o;++u)w[K[u]+e]|=B}if(!e)return U=z,q=K,J=a,void(Q=f);var l=U,s=q,p=0,d=0;for(U=new Array(c),q=g(c,c),u=0;p<e&&d<o;++u)l[p]<z[d]?(U[u]=l[p],q[u]=s[p++]):(U[u]=z[d],q[u]=K[d++]+e);for(;p<e;++p,++u)U[u]=l[p],q[u]=s[p];for(;d<o;++d,++u)U[u]=z[d],q[u]=K[d]+e;i=$(U),J=i[0],Q=i[1]}function A(r,n,t){G.forEach(function(r){r(z,K,n,t)}),z=K=null}function j(r){for(var n,t=0,e=0;t<c;++t)w[n=q[t]]&&(t!==e&&(U[e]=U[t]),q[e]=r[n],++e);for(U.length=e;e<c;)q[e++]=0;var o=$(U);J=o[0],Q=o[1]}function S(r){var n=r[0],t=r[1];if(L)return L=null,F(function(r,e){return n<=e&&e<t}),J=n,Q=t,R;var e,o,u,i=[],a=[];if(n<J)for(e=n,o=Math.min(J,t);e<o;++e)w[u=q[e]]^=B,i.push(u);else if(n>J)for(e=J,o=Math.min(n,Q);e<o;++e)w[u=q[e]]^=B,a.push(u);if(t>Q)for(e=Math.max(n,Q),o=t;e<o;++e)w[u=q[e]]^=B,i.push(u);else if(t<Q)for(e=Math.max(J,t),o=Q;e<o;++e)w[u=q[e]]^=B,a.push(u);return J=n,Q=t,O.forEach(function(r){r(B,i,a)}),R}function N(r){return S(($=function(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}(b,r))(U))}function C(r){return S(($=function(r,n){var t=n[0],e=n[1];return function(n){var o=n.length;return[r.left(n,t,0,o),r.left(n,e,0,o)]}}(b,r))(U))}function I(){return S(($=f)(U))}function P(r){return $=f,F(L=r),J=0,Q=c,R}function F(r){var n,t,e,o=[],u=[];for(n=0;n<c;++n)!(w[t=q[n]]&B)^!!(e=r(U[n],n))&&(e?(w[t]&=W,o.push(t)):(w[t]|=B,u.push(t)));O.forEach(function(r){r(B,o,u)})}function T(r){function t(n,t,e,o){function u(){++R===L&&(k=_(k,K<<=1),I=_(I,K),L=m(K))}var s,p,d,h,y,D,A=C,k=g(R,L),E=T,j=z,S=R,N=0,P=0;for(J&&(E=j=l),C=new Array(R),R=0,I=S>1?x(I,c):g(c,L),S&&(d=(p=A[0]).key);P<o&&!((h=r(n[P]))>=h);)++P;for(;P<o;){for(p&&d<=h?(y=p,D=d,k[N]=R,(p=A[++N])&&(d=p.key)):(y={key:h,value:j()},D=h),C[R]=y;!(h>D||(I[s=t[P]+e]=R,w[s]&W||(y.value=E(y.value,i[s])),++P>=o));)h=r(n[P]);u()}for(;N<S;)C[k[N]=R]=A[N++],u();if(R>N)for(N=0;N<e;++N)I[N]=k[I[N]];s=O.indexOf(X),R>1?(X=a,$=v):(!R&&Q&&(R=1,C=[{key:null,value:j()}]),1===R?(X=f,$=b):(X=l,$=l),I=null),O[s]=X}function e(){if(R>1){for(var r=R,n=C,t=g(r,r),e=0,o=0;e<c;++e)w[e]&&(t[I[o]=I[e]]=1,++o);for(C=[],R=0,e=0;e<r;++e)t[e]&&(t[e]=R++,C.push(n[e]));if(R>1)for(e=0;e<o;++e)I[e]=t[I[e]];else I=null;O[O.indexOf(X)]=R>1?($=v,X=a):1===R?($=b,X=f):$=X=l}else if(1===R){if(Q)return;for(e=0;e<c;++e)if(w[e])return;C=[],R=0,O[O.indexOf(X)]=X=$=l}}function a(r,n,t){if(r!==B&&!J){var e,o,u,a;for(e=0,u=n.length;e<u;++e)w[o=n[e]]&W||((a=C[I[o]]).value=T(a.value,i[o]));for(e=0,u=t.length;e<u;++e)(w[o=t[e]]&W)===r&&((a=C[I[o]]).value=M(a.value,i[o]))}}function f(r,n,t){if(r!==B&&!J){var e,o,u,a=C[0];for(e=0,u=n.length;e<u;++e)w[o=n[e]]&W||(a.value=T(a.value,i[o]));for(e=0,u=t.length;e<u;++e)(w[o=t[e]]&W)===r&&(a.value=M(a.value,i[o]))}}function v(){var r,n;for(r=0;r<R;++r)C[r].value=z();for(r=0;r<c;++r)w[r]&W||((n=C[I[r]]).value=T(n.value,i[r]))}function b(){var r,n=C[0];for(n.value=z(),r=0;r<c;++r)w[r]&W||(n.value=T(n.value,i[r]))}function D(){return J&&($(),J=!1),C}function A(r,n,t){return T=r,M=n,z=t,J=!0,N}function k(){return A(p,d,s)}function j(r){function n(n){return r(n.value)}return P=u(n),F=o(n),N}function S(){var r=O.indexOf(X);return r>=0&&O.splice(r,1),(r=G.indexOf(t))>=0&&G.splice(r,1),(r=E.indexOf(e))>=0&&E.splice(r,1),N}var N={top:function(r){var n=P(D(),0,C.length,r);return F.sort(n,0,n.length)},all:D,reduce:A,reduceCount:k,reduceSum:function(r){return A(h(r),y(r),s)},order:j,orderNatural:function(){return j(n)},size:function(){return R},dispose:S,remove:S};H.push(N);var C,I,P,F,T,M,z,K=8,L=m(K),R=0,X=l,$=l,J=!0,Q=r===l;return arguments.length<1&&(r=n),O.push(X),G.push(t),E.push(e),t(U,q,0,c),k().orderNatural()}function M(){H.forEach(function(r){r.dispose()});var r=k.indexOf(e);return r>=0&&k.splice(r,1),(r=k.indexOf(A))>=0&&k.splice(r,1),(r=E.indexOf(j))>=0&&E.splice(r,1),v&=W,I()}var U,q,z,K,L,R={filter:function(r){return null==r?I():Array.isArray(r)?C(r):"function"==typeof r?P(r):N(r)},filterExact:N,filterRange:C,filterFunction:P,filterAll:I,top:function(r){for(var n,t=[],e=Q;--e>=J&&r>0;)w[n=q[e]]||(t.push(i[n]),--r);return t},bottom:function(r){for(var n,t=[],e=J;e<Q&&r>0;)w[n=q[e]]||(t.push(i[n]),--r),e++;return t},group:T,groupAll:function(){var r=T(l),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r},dispose:M,remove:M},B=~v&-~v,W=~B,X=a(function(r){return z[r]}),$=f,G=[],H=[],J=0,Q=0;return k.unshift(e),k.push(A),E.push(j),v|=B,(D>=32?!B:v&-(1<<D))&&(w=_(w,D<<=1)),e(i,0,c),A(0,0,c),R},groupAll:function(){function r(r,n){var t;if(!g)for(t=n;t<c;++t)w[t]||(u=a(u,i[t]))}function n(r,n,t){var e,o,c;if(!g){for(e=0,c=n.length;e<c;++e)w[o=n[e]]||(u=a(u,i[o]));for(e=0,c=t.length;e<c;++e)w[o=t[e]]===r&&(u=f(u,i[o]))}}function t(r,n,t){return a=r,f=n,l=t,g=!0,v}function e(){return t(p,d,s)}function o(){var t=O.indexOf(n);return t>=0&&O.splice(t),(t=k.indexOf(r))>=0&&k.splice(t),v}var u,a,f,l,v={reduce:t,reduceCount:e,reduceSum:function(r){return t(h(r),y(r),s)},value:function(){return g&&(function(){var r;for(u=l(),r=0;r<c;++r)w[r]||(u=a(u,i[r]))}(),g=!1),u},dispose:o,remove:o},g=!0;return O.push(n),k.push(r),r(0,0),e()},size:function(){return c}},i=[],c=0,v=0,D=8,w=A(0),O=[],k=[],E=[];return arguments.length?r(arguments[0]):e}function g(r,n){return(n<257?A:n<65537?w:O)(r)}function m(r){return 8===r?256:16===r?65536:4294967296}v.version="1.3.12",v.permute=t;var b=v.bisect=e(n);b.by=e;(v.heap=o(n)).by=o;(v.heapselect=u(n)).by=u;(v.insertionsort=i(n)).by=i;(v.quicksort=a(n)).by=a;var D=32,A=c,w=c,O=c,x=function(r,n){for(var t=r.length;t<n;)r[t++]=0;return r},_=function(r,n){if(n>32)throw new Error("invalid array width!");return r};"undefined"!=typeof Uint8Array&&(A=function(r){return new Uint8Array(r)},w=function(r){return new Uint16Array(r)},O=function(r){return new Uint32Array(r)},x=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},_=function(r,n){var t;switch(n){case 16:t=w(r.length);break;case 32:t=O(r.length);break;default:throw new Error("invalid array width!")}return t.set(r),t}),r.crossfilter=v}(n||G)}).crossfilter,J=["bar","box","choropleth","histogram","pie","scatter","scatter3d","scattergeo","scattermapbox","table"],Q=.1,V=.01,Y=/[^:]+(?=[^:]*$)/,Z=function(r){return"src"===r.slice(-"src".length)},rr=function(r){return r.slice(0,-"src".length)},nr=function(r){return[].slice.call(r.querySelectorAll(".js-plotly-plot"))},tr=function(r){return b(r,function(r,n,t){(function(r){return"src"===r.slice(-"src".length)})(r)&&"header"!==t[0]&&(n[rr(r)]=[])},{walkArraysMatchingKeys:["transforms"]})},er=function(r,n,t){var e=n.plotDimensions.concat(n.formDimensions).some(function(r){return r.constrained}),o=e?n.recordDimension.top(1/0).sort(function(r,n){return r.index-n.index}):[];t.filter(function(r){return r.includedInCrossfilter}).forEach(function(t){var u=t._cfData.originalData.map(K);u.forEach(tr);[].concat.apply([],q(n.fieldSources)).filter(function(r){return r.gd===t}).forEach(function(r){var n=o.map(function(n){return n[r.gridColumnName]});u.forEach(function(e,o){if(o===r.traceIndex){!function(r,n,t){for(var e=0,o=r;e<n.length;e++){var u=n[e],i=void 0!==o[u];e===n.length-1?o[u]=t:i||(o[u]={}),o=o[u]}}(e,r.pathArray,n);var u=t._fullData[o].marker||{},i=Array.isArray(u.color),a=!i||i&&!function(r){var n=typeof r;if("string"===n){var t=r;if(0==(r=+r)&&function(r){for(var n,t=r.length,e=0;e<t;e++)if(((n=r.charCodeAt(e))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}(t))return!1}else if("number"!==n)return!1;return r-r<1}(u.color[0]);"pie"!==e.type&&t._fullData[o].marker&&a&&(e.marker=e.marker||{},e.marker.color=t._fullData[o].marker.color)}})}),r.deleteTraces(t,R(t._cfData.originalData.length,t.data.length)),e&&t._fullData.length===t._cfData.originalData.length&&r.addTraces(t,u),u.forEach(function(n,o){return function(r,n,t,e,o){var u=r.d3.select(n);switch(e.type){case"choropleth":D(r,n,o,t);var i=n._cfData.originalOpacity[o];return u.selectAll(".trace path").style("opacity",1),u.selectAll(".trace").filter(function(r,n){return n===o}).style("opacity",t?0:i),u.selectAll(".colorbar .cbaxis").style("opacity",0),void window.setTimeout(function(){u.selectAll(".colorbar .cbaxis").style("opacity",function(r,n){return n===o&&t?0:null})});case"scatter":case"box":D(r,n,o,t);var a=n._cfData.originalOpacity[o];return void u.selectAll(".trace").filter(function(r,n){return n===o}).style("opacity",t?Q:a);case"bar":if(D(r,n,o,t),"stack"===n.layout.barmode)r.restyle(n,"visible",!t,R(0,n._cfData.originalData.length));else{var c=n._cfData.originalOpacity[o];u.selectAll(".trace").filter(function(r,n){return n===o}).style("opacity",t?Q:c)}return;case"histogram":var f=n._cfData.originalOpacity[o];return void u.selectAll(".trace").filter(function(r,n){return n===o}).style("opacity",t?0:f);case"table":return void u.select(".table").style("opacity",t?0:null);case"pie":return u.select(".trace").style("opacity",t?0:null),void u.selectAll(".hovertext").remove();case"scattermapbox":return void r.restyle(n,"marker.opacity",t?V:1,[o]);case"scatter3d":return void r.restyle(n,"marker.opacity",t?Q:n._cfData.originalFullData[o].marker.opacity,[o]);default:return void r.d3.select(n).select(".trace").style("opacity",t?Q:null)}}(r,t,e,n,o)})})},or=function(r){return r.plotDimensions.concat(r.formDimensions).forEach(function(r){r.constrained=!1,r.cfDimension&&r.cfDimension.filter(null)})},ur=function(r,n,t){var e=n._crossfilter,o=e.plotDimensions.find(function(r){return r.gd===n}),u=function(r,n,t){var e=n.constrained&&"pie"===r._fullData[0].type?null:t;return"pie"===r._fullData[0].type?e?e.points:[]:("histogram"===r._fullData[0].type&&(e={points:[]},t&&!Array.isArray(t)&&t.points.forEach(function(n){(n.pointNumbers||r.calcdata[0][n.pointNumber].pts).forEach(function(r){e.points.push({pointNumber:r,curveNumber:n.curveNumber,data:n.data,fullData:n.fullData})})})),e?e.points.filter(function(n){return n.curveNumber<r._cfData.originalData.length&&n.data.uid===r.data[n.curveNumber].uid}):[])}(n,o,t);or(e);var i=function(r,n){for(var t={},e=0;e<n.length;e++){var o=n[e],u=o.fullData&&o.fullData.transforms,i=u?u.filter(function(r){return r._indexToPoints}):[];if(i.length)i[i.length-1]._indexToPoints[o.pointNumber].forEach(function(r){t[r]={pointNumber:r}});else if("pie"===r._fullData[0].type)for(var a=0;a<r.data[0].labels.length;a++)r.data[0].labels[a]===o.label&&(t[a]={pointNumber:a});else t[o.pointNumber]=o}return t}(n,u);o.constrained=u.length>0,o.constrained||n.querySelectorAll(".select-outline").forEach(function(r){return r.parentNode.removeChild(r)}),o.cfDimension.filterFunction(o.constrained?function(r){return i[r]}:function(){return!0}),r.restyle(n,"selectedpoints",null),er(r,e,nr(document).filter(function(r){return r.includedInCrossfilter}))};r.cfEnabled=function(r,n){return r&&function(r){var n=r.every(function(r){return-1!==J.indexOf(r.type)}),t={};r.forEach(function(r){return Object.keys(r).filter(Z).forEach(function(n){var e=r[rr(n)].length;t[e]=!0})});var e=Object.keys(t).length<2,o=!1;return r.some(function(r){return b(r,function(r){Z(r)&&(o=!0)},{walkArraysMatchingKeys:["transforms"]})}),n&&o&&e}(n.data)},r.cfLayoutOverrides={dragmode:"select",showlegend:!1},r.resetCrossfilter=function(r){var n=nr(document),t=n[0]._crossfilter;or(t),er(r,t,[].concat(n).filter(function(r){return r.includedInCrossfilter}))},r.specFilter=function(r,n){var t=nr(document),e=n.gridColumn,o=n.isNaN?n.value:Number(n.value),u=n.operator,i=t[0]._crossfilter,a=i.formDimensions[0];a.constrained=!0,a.cfDimension&&(a.cfDimension.filter(null),a.cfDimension.dispose(),a.cfDimension=null,a.constrained=!1),a.cfDimension=i.cf.dimension(function(r){return r[e]});var c={">":function(r){return r>o},"<":function(r){return r<o},"==":function(r){return r===o}}[u];a.cfDimension.filterFunction(c),a.constrained=!0,er(r,i,[].concat(t).filter(function(r){return r.includedInCrossfilter}))},r.cfPlotSetup=function(r,n,t,e,o){var u=function(r){return r.length?r[0]._crossfilter:{fieldSources:{},cf:null,grid:{}}}(n);!function(r,n){e._crossfilter=n}(0,u),o.data.forEach(function(r,n){return function(r,n,t){return b(n,function(e,o,u){var i=r._crossfilter;if(("table"!==n.type||"header"!==u[0])&&Z(e)){var a=o[e].match(Y)[0],c=e,f=rr(c),l=[];"table"===n.type&&"cells"===u[0]?a.replace(/\*/g,"").split(",").forEach(function(n,e){var i=u.concat([f,e]);l.push({gd:r,srcFieldName:c,traceIndex:t,data:o[f][e],pathArray:i,fieldPath:g(i),constrained:!1,gridColumnName:n})}):l.push({gd:r,srcFieldName:c,traceIndex:t,data:o[f],pathArray:u.concat([f]),fieldPath:g(u.concat([f])),constrained:!1,gridColumnName:a}),l.forEach(function(r){i.fieldSources[r.gridColumnName]=(i.fieldSources[r.gridColumnName]||[]).concat(r)})}},{walkArraysMatchingKeys:["transforms"]})}(e,r,n)}),Object.keys(u.fieldSources).forEach(function(r){var n=u.fieldSources[r];u.grid[r]=n[0].data}),u.cf=H(),t.then(function(n){"pie"===n._fullData[0].type?n.on("plotly_click",ur.bind(0,r,n)):n.on("plotly_selected",ur.bind(0,r,n)),n.includedInCrossfilter=!0,u.plotDimensions&&u.plotDimensions.length&&u.plotDimensions.forEach(function(r){return r.cfDimension.dispose()}),u.plotDimensions=nr(document).filter(function(r){return r.includedInCrossfilter}).map(function(r){return{gd:r,constrained:!1,cfDimension:u.cf.dimension(function(r){return r.index})}}),u.formDimensions=[{gd:void 0,constrained:!1,cfDimension:null}],e._cfData={originalData:e.data.map(K),originalFullData:e._fullData.map(K),originalOpacity:U(function(r){return r.style.opacity})(e.querySelectorAll(".trace"))}}),u.recordDimension=u.cf.dimension(function(r){return r});var i=B(u.grid);if(i.length){var a=i[0][1].map(function(r,n){for(var t={},e=0;e<i.length;e++)t.index=n,t[i[e][0]]=i[e][1][n];return t});u.cf.add(a)}},Object.defineProperty(r,"__esModule",{value:!0})});
